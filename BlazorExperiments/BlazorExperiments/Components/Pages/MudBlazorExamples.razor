@page "/mudblazor-examples"
@using MudBlazor
@rendermode InteractiveServer

<PageTitle>MudBlazor Examples</PageTitle>

<MudThemeProvider />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudContainer MaxWidth="MaxWidth.Large" Class="mt-4">
    <MudText Typo="Typo.h3" GutterBottom="true">MudBlazor Component Examples</MudText>
    <MudText Typo="Typo.body1" Class="mb-6">Comprehensive examples of MudBlazor components</MudText>

    <MudGrid>
        <!-- Buttons Section -->
        <MudItem xs="12">
            <MudPaper Class="pa-4 mb-4">
                <MudText Typo="Typo.h5" GutterBottom="true">Buttons</MudText>
                <MudStack Row="true" Spacing="2">
                    <MudButton Variant="Variant.Filled" Color="Color.Primary">Primary</MudButton>
                    <MudButton Variant="Variant.Filled" Color="Color.Secondary">Secondary</MudButton>
                    <MudButton Variant="Variant.Outlined" Color="Color.Primary">Outlined</MudButton>
                    <MudButton Variant="Variant.Text" Color="Color.Primary">Text</MudButton>
                    <MudButton Variant="Variant.Filled" Color="Color.Success" StartIcon="@Icons.Material.Filled.Check">Success</MudButton>
                    <MudButton Variant="Variant.Filled" Color="Color.Error" StartIcon="@Icons.Material.Filled.Delete">Delete</MudButton>
                </MudStack>
            </MudPaper>
        </MudItem>

        <!-- Text Fields Section -->
        <MudItem xs="12" md="6">
            <MudPaper Class="pa-4 mb-4">
                <MudText Typo="Typo.h5" GutterBottom="true">Text Fields</MudText>
                <MudTextField @bind-Value="textValue" Label="Standard" Variant="Variant.Outlined" />
                <MudTextField @bind-Value="emailValue" Label="Email" Variant="Variant.Outlined" InputType="InputType.Email" Class="mt-3" />
                <MudTextField @bind-Value="passwordValue" Label="Password" Variant="Variant.Outlined" InputType="InputType.Password" Class="mt-3" />
                <MudTextField @bind-Value="disabledValue" Label="Disabled" Variant="Variant.Outlined" Disabled="true" Class="mt-3" />
            </MudPaper>
        </MudItem>

        <!-- Select & AutoComplete Section -->
        <MudItem xs="12" md="6">
            <MudPaper Class="pa-4 mb-4">
                <MudText Typo="Typo.h5" GutterBottom="true">Select & AutoComplete</MudText>
                <MudSelect @bind-Value="selectedValue" Label="Select an option" Variant="Variant.Outlined">
                    <MudSelectItem Value="@("Option 1")">Option 1</MudSelectItem>
                    <MudSelectItem Value="@("Option 2")">Option 2</MudSelectItem>
                    <MudSelectItem Value="@("Option 3")">Option 3</MudSelectItem>
                </MudSelect>
                <MudAutocomplete T="string" @bind-Value="autocompleteValue" Label="Autocomplete" SearchFunc="@SearchAsync" Variant="Variant.Outlined" Class="mt-3" />
            </MudPaper>
        </MudItem>

        <!-- Checkboxes & Switches Section -->
        <MudItem xs="12" md="6">
            <MudPaper Class="pa-4 mb-4">
                <MudText Typo="Typo.h5" GutterBottom="true">Checkboxes & Switches</MudText>
                <MudCheckBox @bind-Value="checkbox1" Label="Checkbox 1" Color="Color.Primary" />
                <MudCheckBox @bind-Value="checkbox2" Label="Checkbox 2" Color="Color.Secondary" />
                <MudSwitch @bind-Value="switch1" Label="Switch 1" Color="Color.Primary" Class="mt-3" />
                <MudSwitch @bind-Value="switch2" Label="Switch 2" Color="Color.Success" Class="mt-3" />
            </MudPaper>
        </MudItem>

        <!-- Radio Buttons Section -->
        <MudItem xs="12" md="6">
            <MudPaper Class="pa-4 mb-4">
                <MudText Typo="Typo.h5" GutterBottom="true">Radio Buttons</MudText>
                <MudRadioGroup @bind-Value="radioValue">
                    <MudRadio Value="@("option1")" Color="Color.Primary">Option 1</MudRadio>
                    <MudRadio Value="@("option2")" Color="Color.Secondary">Option 2</MudRadio>
                    <MudRadio Value="@("option3")" Color="Color.Tertiary">Option 3</MudRadio>
                </MudRadioGroup>
            </MudPaper>
        </MudItem>

        <!-- Alerts Section -->
        <MudItem xs="12">
            <MudPaper Class="pa-4 mb-4">
                <MudText Typo="Typo.h5" GutterBottom="true">Alerts</MudText>
                <MudAlert Severity="Severity.Success" Class="mb-2">This is a success alert!</MudAlert>
                <MudAlert Severity="Severity.Info" Class="mb-2">This is an info alert!</MudAlert>
                <MudAlert Severity="Severity.Warning" Class="mb-2">This is a warning alert!</MudAlert>
                <MudAlert Severity="Severity.Error" Class="mb-2">This is an error alert!</MudAlert>
            </MudPaper>
        </MudItem>

        <!-- Chips Section -->
        <MudItem xs="12" md="6">
            <MudPaper Class="pa-4 mb-4">
                <MudText Typo="Typo.h5" GutterBottom="true">Chips</MudText>
                <MudChipSet T="string">
                    <MudChip T="string" Color="Color.Primary" Text="Primary Chip" />
                    <MudChip T="string" Color="Color.Secondary" Text="Secondary Chip" />
                    <MudChip T="string" Color="Color.Success" Icon="@Icons.Material.Filled.Check" Text="Success" />
                    <MudChip T="string" Color="Color.Error" Text="Closeable" OnClose="@(() => {})" />
                </MudChipSet>
            </MudPaper>
        </MudItem>

        <!-- Progress Section -->
        <MudItem xs="12" md="6">
            <MudPaper Class="pa-4 mb-4">
                <MudText Typo="Typo.h5" GutterBottom="true">Progress</MudText>
                <MudProgressLinear Color="Color.Primary" Value="50" Class="mb-3" />
                <MudProgressLinear Color="Color.Secondary" Indeterminate="true" Class="mb-3" />
                <MudProgressCircular Color="Color.Primary" Size="Size.Large" Value="75" />
            </MudPaper>
        </MudItem>

        <!-- Dialog Example -->
        <MudItem xs="12" md="6">
            <MudPaper Class="pa-4 mb-4">
                <MudText Typo="Typo.h5" GutterBottom="true">Dialog</MudText>
                <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="OpenDialog">Open Dialog</MudButton>
            </MudPaper>
        </MudItem>

        <!-- Snackbar Example -->
        <MudItem xs="12" md="6">
            <MudPaper Class="pa-4 mb-4">
                <MudText Typo="Typo.h5" GutterBottom="true">Snackbar</MudText>
                <MudStack Row="true" Spacing="2">
                    <MudButton Variant="Variant.Filled" Color="Color.Success" OnClick="@(() => ShowSnackbar(Severity.Success))">Success</MudButton>
                    <MudButton Variant="Variant.Filled" Color="Color.Info" OnClick="@(() => ShowSnackbar(Severity.Info))">Info</MudButton>
                    <MudButton Variant="Variant.Filled" Color="Color.Warning" OnClick="@(() => ShowSnackbar(Severity.Warning))">Warning</MudButton>
                    <MudButton Variant="Variant.Filled" Color="Color.Error" OnClick="@(() => ShowSnackbar(Severity.Error))">Error</MudButton>
                </MudStack>
            </MudPaper>
        </MudItem>

        <!-- Table Section -->
        <MudItem xs="12">
            <MudPaper Class="pa-4 mb-4">
                <MudText Typo="Typo.h5" GutterBottom="true">Table</MudText>
                <MudTable Items="@tableItems" Hover="true" Breakpoint="Breakpoint.Sm">
                    <HeaderContent>
                        <MudTh>Name</MudTh>
                        <MudTh>Email</MudTh>
                        <MudTh>Role</MudTh>
                        <MudTh>Actions</MudTh>
                    </HeaderContent>
                    <RowTemplate>
                        <MudTd DataLabel="Name">@context.Name</MudTd>
                        <MudTd DataLabel="Email">@context.Email</MudTd>
                        <MudTd DataLabel="Role">@context.Role</MudTd>
                        <MudTd DataLabel="Actions">
                            <MudIconButton Icon="@Icons.Material.Filled.Edit" Color="Color.Primary" Size="Size.Small" />
                            <MudIconButton Icon="@Icons.Material.Filled.Delete" Color="Color.Error" Size="Size.Small" />
                        </MudTd>
                    </RowTemplate>
                </MudTable>
            </MudPaper>
        </MudItem>

        <!-- Cards Section -->
        <MudItem xs="12" md="4">
            <MudCard>
                <MudCardMedia Image="https://via.placeholder.com/400x200" Height="200" />
                <MudCardContent>
                    <MudText Typo="Typo.h5">Card Title</MudText>
                    <MudText Typo="Typo.body2">This is a simple card example with an image, content, and actions.</MudText>
                </MudCardContent>
                <MudCardActions>
                    <MudButton Variant="Variant.Text" Color="Color.Primary">Learn More</MudButton>
                </MudCardActions>
            </MudCard>
        </MudItem>

        <MudItem xs="12" md="4">
            <MudCard>
                <MudCardContent>
                    <MudText Typo="Typo.h5" GutterBottom="true">Statistics</MudText>
                    <MudText Typo="Typo.h3" Color="Color.Primary">1,234</MudText>
                    <MudText Typo="Typo.body2" Color="Color.Success">+12% from last month</MudText>
                </MudCardContent>
            </MudCard>
        </MudItem>

        <MudItem xs="12" md="4">
            <MudCard Outlined="true">
                <MudCardHeader>
                    <CardHeaderAvatar>
                        <MudAvatar Color="Color.Secondary">U</MudAvatar>
                    </CardHeaderAvatar>
                    <CardHeaderContent>
                        <MudText Typo="Typo.body1">User Name</MudText>
                        <MudText Typo="Typo.body2">@@user123</MudText>
                    </CardHeaderContent>
                </MudCardHeader>
                <MudCardContent>
                    <MudText Typo="Typo.body2">Card with avatar header example.</MudText>
                </MudCardContent>
            </MudCard>
        </MudItem>

        <!-- Expansion Panel Section -->
        <MudItem xs="12">
            <MudPaper Class="pa-4 mb-4">
                <MudText Typo="Typo.h5" GutterBottom="true">Expansion Panels</MudText>
                <MudExpansionPanels>
                    <MudExpansionPanel Text="Panel 1">
                        <MudText>Content for panel 1. This panel can contain any content.</MudText>
                    </MudExpansionPanel>
                    <MudExpansionPanel Text="Panel 2">
                        <MudText>Content for panel 2. Panels expand and collapse smoothly.</MudText>
                    </MudExpansionPanel>
                    <MudExpansionPanel Text="Panel 3">
                        <MudText>Content for panel 3. Multiple panels can be open at once.</MudText>
                    </MudExpansionPanel>
                </MudExpansionPanels>
            </MudPaper>
        </MudItem>

        <!-- Tabs Section -->
        <MudItem xs="12">
            <MudPaper Class="pa-4 mb-4">
                <MudText Typo="Typo.h5" GutterBottom="true">Tabs</MudText>
                <MudTabs Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6">
                    <MudTabPanel Text="Tab 1" Icon="@Icons.Material.Filled.Home">
                        <MudText>Content for Tab 1</MudText>
                    </MudTabPanel>
                    <MudTabPanel Text="Tab 2" Icon="@Icons.Material.Filled.Settings">
                        <MudText>Content for Tab 2</MudText>
                    </MudTabPanel>
                    <MudTabPanel Text="Tab 3" Icon="@Icons.Material.Filled.Info">
                        <MudText>Content for Tab 3</MudText>
                    </MudTabPanel>
                </MudTabs>
            </MudPaper>
        </MudItem>
    </MudGrid>
</MudContainer>

@code {
    [Inject] private IDialogService DialogService { get; set; } = default!;
    [Inject] private ISnackbar Snackbar { get; set; } = default!;

    // Text fields
    private string textValue = "";
    private string emailValue = "";
    private string passwordValue = "";
    private string disabledValue = "Disabled field";

    // Select & Autocomplete
    private string selectedValue = "Option 1";
    private string autocompleteValue = "";
    private string[] searchItems = ["Apple", "Banana", "Cherry", "Date", "Elderberry", "Fig", "Grape"];

    // Checkboxes & Switches
    private bool checkbox1 = true;
    private bool checkbox2 = false;
    private bool switch1 = true;
    private bool switch2 = false;

    // Radio buttons
    private string radioValue = "option1";

    // Table data
    private List<TableItem> tableItems = new()
    {
        new TableItem { Name = "John Doe", Email = "john@example.com", Role = "Admin" },
        new TableItem { Name = "Jane Smith", Email = "jane@example.com", Role = "User" },
        new TableItem { Name = "Bob Johnson", Email = "bob@example.com", Role = "Editor" }
    };

    private async Task<IEnumerable<string>> SearchAsync(string value, CancellationToken token)
    {
        await Task.Delay(5, token);

        if (string.IsNullOrEmpty(value))
            return searchItems;

        return searchItems.Where(x => x.Contains(value, StringComparison.InvariantCultureIgnoreCase));
    }

    private async Task OpenDialog()
    {
        bool? result = await DialogService.ShowMessageBox(
            "Simple Dialog",
            "This is a simple dialog example. You can add any content here.",
            yesText:"Ok", cancelText:"Cancel");

        if (result == true)
        {
            Snackbar.Add("Dialog confirmed!", Severity.Success);
        }
    }

    private void ShowSnackbar(Severity severity)
    {
        string message = severity switch
        {
            Severity.Success => "Success message!",
            Severity.Info => "Info message!",
            Severity.Warning => "Warning message!",
            Severity.Error => "Error message!",
            _ => "Message"
        };

        Snackbar.Add(message, severity);
    }

    public class TableItem
    {
        public string Name { get; set; } = "";
        public string Email { get; set; } = "";
        public string Role { get; set; } = "";
    }
}
